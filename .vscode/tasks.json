{
  // VS Code Tasks Configuration for LittleJS Roguelike Project
  //
  // This file defines custom tasks that integrate with GitHub Copilot Chat
  // to automate common development workflows for ECS architecture.
  //
  // Task Categories:
  // 1. Documentation tasks - Add JSDoc comments to code
  // 2. ECS Creation tasks - Create components, systems, and entity factories
  // 3. Verification tasks - Validate coherence between ECS elements
  // 4. Composed tasks - Multi-step workflows that run tasks in sequence
  // 5. Code assistance tasks - Explain, refactor, test, and debug code
  //
  // Usage: Run tasks via Command Palette (Ctrl+Shift+P) > "Tasks: Run Task"

  "version": "2.0.0",
  "tasks": [
    // ============================================================================
    // DOCUMENTATION TASKS
    // ============================================================================

    {
      // Adds JSDoc documentation to a specific code element
      "label": "Copilot: Add JSDoc",
      "type": "shell",
      "command": "code",
      "args": [
        "chat",
        "Add JSDoc for this element: ${input:elementDescription}"
      ],
      "presentation": {
        "reveal": "never",
        "focus": false
      },
      "problemMatcher": []
    },
    {
      // Adds JSDoc documentation to all project files at once
      "label": "Copilot: Add JSDoc to all project files",
      "type": "shell",
      "command": "code",
      "args": [
        "chat",
        "Add JSDoc for all functions, classes, and methods in the project"
      ],
      "presentation": {
        "reveal": "never",
        "focus": false
      },
      "problemMatcher": []
    },
    {
      // Updates the main copilot-instructions.md file to reflect recent code changes
      "label": "Copilot: Update copilot-instructions.md based on recent changes",
      "type": "shell",
      "command": "code",
      "args": [
        "chat",
        "Update copilot-instructions.md based on recent changes"
      ],
      "presentation": {
        "reveal": "never",
        "focus": false
      },
      "problemMatcher": []
    },
    {
      // Updates or creates any documentation files based on recent changes
      "label": "Copilot: Update or create documentation or instructions as needed based on recent changes",
      "type": "shell",
      "command": "code",
      "args": [
        "chat",
        "Update or create documentation or instructions as needed based on recent changes. You can create new files if necessary."
      ],
      "presentation": {
        "reveal": "never",
        "focus": false
      },
      "problemMatcher": []
    },

    // ============================================================================
    // ECS CREATION TASKS
    // ============================================================================

    {
      // Creates a new ECS component (data-only interface)
      "label": "Copilot: Create Component",
      "type": "shell",
      "command": "code",
      "args": [
        "chat",
        "Create a new ECS component named ${input:componentName} in src/ts/components/"
      ],
      "presentation": {
        "reveal": "never",
        "focus": false
      },
      "problemMatcher": []
    },
    {
      // Creates a new ECS system (pure function that operates on components)
      "label": "Copilot: Create System",
      "type": "shell",
      "command": "code",
      "args": [
        "chat",
        "Create a new ECS system named ${input:systemName} in src/ts/systems/"
      ],
      "presentation": {
        "reveal": "never",
        "focus": false
      },
      "problemMatcher": []
    },
    {
      // Creates an entity factory function to spawn entities with specific components
      "label": "Copilot: Create Entity Factory",
      "type": "shell",
      "command": "code",
      "args": [
        "chat",
        "Create entity factory function create${input:entityType} in src/ts/entities.ts"
      ],
      "presentation": {
        "reveal": "never",
        "focus": false
      },
      "problemMatcher": []
    },
    {
      // Creates component, system, and entity factory all at once
      "label": "Copilot: Create Component, System and Entity Factory",
      "type": "shell",
      "command": "code",
      "args": [
        "chat",
        "Create: new ECS component named ${input:componentName} in src/ts/components/, new ECS system named ${input:systemName} in src/ts/systems/, and new entity factory function create${input:entityType} in src/ts/entities.ts"
      ],
      "presentation": {
        "reveal": "never",
        "focus": false
      },
      "problemMatcher": []
    },

    // ============================================================================
    // VERIFICATION TASKS
    // ============================================================================

    {
      // Validates that a component and system work together correctly
      "label": "Copilot: Verify that Component and System are coherent",
      "type": "shell",
      "command": "code",
      "args": [
        "chat",
        "Verify that new ECS component named ${input:componentName} in src/ts/components/ and new ECS system named ${input:systemName} in src/ts/systems/ are coherent"
      ],
      "presentation": {
        "reveal": "never",
        "focus": false
      },
      "problemMatcher": []
    },
    {
      // Validates that component, system, and entity factory work together correctly
      "label": "Copilot: Verify that Component, System and Entity Factory are coherent",
      "type": "shell",
      "command": "code",
      "args": [
        "chat",
        "Verify that new ECS component named ${input:componentName} in src/ts/components/, new ECS system named ${input:systemName} in src/ts/systems/, and new entity factory function create${input:entityType} in src/ts/entities.ts are coherent"
      ],
      "presentation": {
        "reveal": "never",
        "focus": false
      },
      "problemMatcher": []
    },

    // ============================================================================
    // COMPOSED TASKS (Multi-step workflows)
    // ============================================================================

    {
      // Runs: Create Component → Create System → Verify coherence
      "label": "Copilot: (Composed) Create Component and System",
      "dependsOn": [
        "Copilot: Create Component",
        "Copilot: Create System",
        "Copilot: Verify that Component and System are coherent"
      ],
      "dependsOrder": "sequence"
    },
    {
      // Runs: Create Component → Create System → Create Entity Factory → Verify coherence
      "label": "Copilot: (Composed) Create Component, System and Entity Factory",
      "dependsOn": [
        "Copilot: Create Component",
        "Copilot: Create System",
        "Copilot: Create Entity Factory",
        "Copilot: Verify that Component, System and Entity Factory are coherent"
      ],
      "dependsOrder": "sequence"
    },

    // ============================================================================
    // CODE ASSISTANCE TASKS
    // ============================================================================

    {
      // Explains the currently selected code
      "label": "Copilot: Explain Selection",
      "type": "shell",
      "command": "code",
      "args": ["chat", "Explain this code: ${selectedText}"],
      "presentation": {
        "reveal": "never",
        "focus": false
      },
      "problemMatcher": []
    },
    {
      // Refactors the selected code according to a specified goal
      "label": "Copilot: Refactor Selection",
      "type": "shell",
      "command": "code",
      "args": [
        "chat",
        "Refactor this code to ${input:refactorGoal}: ${selectedText}"
      ],
      "presentation": {
        "reveal": "never",
        "focus": false
      },
      "problemMatcher": []
    },
    {
      // Generates unit tests for the selected code
      "label": "Copilot: Add Tests",
      "type": "shell",
      "command": "code",
      "args": ["chat", "Add unit tests for: ${selectedText}"],
      "presentation": {
        "reveal": "never",
        "focus": false
      },
      "problemMatcher": []
    },
    {
      // Debugs and fixes issues in the selected code
      "label": "Copilot: Fix Bug",
      "type": "shell",
      "command": "code",
      "args": [
        "chat",
        "Debug and fix this code: ${selectedText}. Issue: ${input:bugDescription}"
      ],
      "presentation": {
        "reveal": "never",
        "focus": false
      },
      "problemMatcher": []
    }
  ],

  // ============================================================================
  // INPUT VARIABLES
  // Used by tasks to prompt the user for specific values
  // ============================================================================

  "inputs": [
    {
      "id": "elementDescription",
      "type": "promptString",
      "description": "Describe the element (class, function, variable, etc.)"
    },
    {
      "id": "componentName",
      "type": "promptString",
      "description": "Component name (PascalCase, e.g., 'Inventory')"
    },
    {
      "id": "systemName",
      "type": "promptString",
      "description": "System name (camelCase, e.g., 'inventory')"
    },
    {
      "id": "entityType",
      "type": "promptString",
      "description": "Entity type (PascalCase, e.g., 'Merchant')"
    },
    {
      "id": "refactorGoal",
      "type": "promptString",
      "description": "What should the refactoring achieve?"
    },
    {
      "id": "bugDescription",
      "type": "promptString",
      "description": "Describe the bug or issue"
    }
  ]
}
